 /* 
 * Wallpaper - Adds a smooth-scaling, page-filling background
 * @author Ben Plum
 * @version 2.1.2
 *
 * Copyright Â© 2013 Ben Plum <mr@benplum.com>
 * Released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 */

if(jQuery)(function(c){function p(b){b=c.extend({},f,b);for(var a=c(this),e=0,g=a.length;e<g;e++)q.apply(a.eq(e),[c.extend({},b)]);c("body").hasClass("wallpaper-inititalized")||(c("body").addClass("wallpaper-inititalized"),c(window).on("resize.wallpaper",b,r));return a}function q(b){var a=c(this);a.hasClass("wallpaper")||(c.extend(b,a.data("wallpaper-options")),a.addClass("wallpaper loading").append('<div class="wallpaper-container"></div>'),b.isAnimating=!1,b.$target=a,b.$container=b.$target.find(".wallpaper-container"), b.fixed&&b.$container.addClass("wallpaper-fixed"),b.$target.data("wallpaper",b).on("resize.wallpaper",b,g),a=b.source,b.source="",h(a,b),b.onReady.call())}function h(b,a){if(!a.isAnimating)if(a.$target.addClass("loading"),a.source!==b){a.source=b;a.isAnimating=!0;var e=c('<div class="wallpaper-image"><img /></div>');$img=e.find("img");$img.one("load.wallpaper",function(){a.fixed&&e.addClass("fixed").css({backgroundImage:"url("+a.source+")"});k&&e.addClass("native").css({backgroundImage:"url("+a.source+ ")"});1>a.$container.find(".wallpaper-image").length?(e.appendTo(a.$container).animate({opacity:1},a.speed),a.isAnimating=!1,a.$target.trigger("wallpaper.loaded")):e.appendTo(a.$container).animate({opacity:1},a.speed,function(){a.$container.find(".wallpaper-image").not(":last").remove();a.isAnimating=!1;a.$target.trigger("wallpaper.loaded")});a.$target.removeClass("loading");g({data:a});a.onLoad.call()}).attr("src",a.source);($img[0].complete||4===$img[0].readyState)&&$img.trigger("load")}else a.$target.trigger("wallpaper.loaded")} function g(b){if(!k){var a=b.data;b.preventDefault&&(b.preventDefault(),b.stopPropagation());b=a.$container.find(".wallpaper-image");for(var c=0,g=b.length;c<g;c++){var f=b.eq(c),d=f.find("img");if(0<d.length){var l=a.$target.outerWidth(),h=a.$target.outerHeight();var d=d[0],m=new Image;"undefined"!=typeof d.naturalHeight?d={naturalHeight:d.naturalHeight,naturalWidth:d.naturalWidth}:"img"===d.tagName.toLowerCase()?(m.src=d.src,d={naturalHeight:m.height,naturalWidth:m.width}):d=!1;a.width=d.naturalWidth; a.height=d.naturalHeight;a.left=0;a.top=0;d=a.width/a.height;a.height=h;a.width=a.height*d;a.width<l&&(a.width=l,a.height=a.width/d);a.left=-(a.width-l)/2;a.top=-(a.height-h)/2;a.fixed?f.css({backgroundPosition:a.left+"px "+a.top+"px",backgroundSize:a.width+"px "+a.height+"px"}):f.css({height:a.height,width:a.width,left:a.left,top:a.top})}}}}function r(){k||c(".wallpaper").each(function(){var b=c(this).data("wallpaper");g({data:b})})}var f={fixed:!1,onReady:function(){},onLoad:function(){},source:"", speed:500},k="backgroundSize"in document.documentElement.style,n={defaults:function(b){f=c.extend(f,b||{});return c(this)},destroy:function(){var b=c(this).each(function(){var a=c(this).data("wallpaper");a.$target.removeClass("wallpaper");a.$container.remove()});1>c(".wallpaper").length&&c(window).off(".wallpaper");return b},load:function(b){return c(this).each(function(){var a=c(this).data("wallpaper");h(b,a)})}};c.fn.wallpaper=function(b){return n[b]?n[b].apply(this,Array.prototype.slice.call(arguments, 1)):"object"!==typeof b&&b?this:p.apply(this,arguments)}})(jQuery);